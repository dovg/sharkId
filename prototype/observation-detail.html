<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SharkID ‚Äî Observation</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">

  <!-- Sidebar -->
  <aside class="sidebar">
    <a class="sidebar-logo" href="dive-sessions.html">ü¶à SharkID</a>
    <nav class="sidebar-nav">
      <a href="dive-sessions.html" class="nav-item active">
        <span class="nav-item-icon">ü§ø</span><span class="nav-label">Dive Sessions</span>
      </a>
      <a href="validation-queue.html" class="nav-item">
        <span class="nav-item-icon">‚úÖ</span><span class="nav-label">Validation Queue</span>
        <span class="badge">5</span>
      </a>
      <a href="sharks.html" class="nav-item">
        <span class="nav-item-icon">ü¶à</span><span class="nav-label">Shark Catalog</span>
      </a>
      <a href="locations.html" class="nav-item">
        <span class="nav-item-icon">üìç</span><span class="nav-label">Locations</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a href="login.html" class="nav-item">‚Ü© <span class="nav-label">Log Out</span></a>
    </div>
  </aside>

  <!-- Main -->
  <div class="main">
    <div class="page-header">
      <div>
        <div class="page-title">Observation</div>
        <div class="page-subtitle">
          <a href="dive-sessions.html" style="color:var(--muted);text-decoration:none;">Dive Sessions</a>
          &nbsp;/&nbsp;
          <a href="dive-session-detail.html" style="color:var(--muted);text-decoration:none;">Tiger Beach, Mar 15</a>
          &nbsp;/&nbsp; Observation #OBS-00042
        </div>
      </div>
      <span class="status s-draft" id="obs-status" style="font-size:13px; padding:5px 12px;">Draft</span>
    </div>

    <div class="page-body">
      <div class="grid2" style="align-items:start; gap:20px;">

        <!-- Left: photo -->
        <div>
          <div class="card mb16">
            <div class="card-header">
              <span class="card-title">Photo</span>
            </div>
            <div class="card-body">
              <div style="width:100%;aspect-ratio:4/3;background:#c8d8e8;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:60px;border:1px solid var(--border);margin-bottom:12px;">ü¶à</div>
              <div class="kv-list" style="font-size:12.5px;">
                <span class="kv-key">File</span>
                <span class="kv-val">IMG_4826.jpg</span>
                <span class="kv-key">Taken</span>
                <span class="kv-val">Mar 15, 2024 ¬∑ 10:23:41</span>
                <span class="kv-key">GPS</span>
                <span class="kv-val">25.1234¬∞ N, 79.0234¬∞ W</span>
                <span class="kv-key">Camera</span>
                <span class="kv-val">Canon EOS 5D Mark IV</span>
                <span class="kv-key">Focal length</span>
                <span class="kv-val">17 mm</span>
                <span class="kv-key">ISO</span>
                <span class="kv-val">400</span>
                <span class="kv-key">Shutter</span>
                <span class="kv-val">1/500 s</span>
              </div>
            </div>
          </div>

          <!-- EXIF raw (collapsed) -->
          <div class="card">
            <div class="card-header" style="cursor:pointer;" onclick="toggleExif()">
              <span class="card-title">Raw EXIF Data</span>
              <span class="text-muted text-sm" id="exif-toggle-label">Show ‚ñæ</span>
            </div>
            <div id="exif-panel" style="display:none;">
              <div class="card-body">
                <pre style="font-size:11.5px;line-height:1.6;color:var(--muted);overflow:auto;max-height:220px;">{
  "Make": "Canon",
  "Model": "EOS 5D Mark IV",
  "DateTime": "2024:03:15 10:23:41",
  "ExposureTime": "1/500",
  "FNumber": 5.6,
  "ISOSpeedRatings": 400,
  "FocalLength": 17,
  "GPSLatitude": [25, 7, 24.24],
  "GPSLatitudeRef": "N",
  "GPSLongitude": [79, 1, 24.24],
  "GPSLongitudeRef": "W",
  "Flash": "Flash did not fire",
  "WhiteBalance": "Auto",
  "SubjectDistanceRange": "Distant view"
}</pre>
              </div>
            </div>
          </div>
        </div>

        <!-- Right: editable fields -->
        <div>
          <div class="card mb16">
            <div class="card-header">
              <span class="card-title">Observation Details</span>
              <span class="text-muted text-sm">Auto-filled from EXIF ‚Äî review and confirm</span>
            </div>
            <div class="card-body">

              <div class="form-group">
                <label>Shark</label>
                <div class="flex-gap8" style="align-items:center;">
                  <div style="width:40px;height:40px;background:#c8d8e8;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0;">ü¶à</div>
                  <select id="shark-select" style="flex:1;">
                    <option value="">‚Äî Not linked ‚Äî</option>
                    <option value="emma" selected>Emma</option>
                    <option value="luna">Luna</option>
                    <option value="hermione">Hermione</option>
                    <option value="ginny">Ginny</option>
                    <option value="bellatrix">Bellatrix</option>
                    <option value="molly">Molly</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <label>Dive Session</label>
                <select>
                  <option selected>Tiger Beach, Bahamas ¬∑ March 15, 2024</option>
                  <option>Tiger Beach, Bahamas ¬∑ March 12, 2024</option>
                  <option>Fuvahmulah Atoll ¬∑ March 8, 2024</option>
                </select>
              </div>

              <div class="form-group">
                <label>Date &amp; Time of Sighting</label>
                <input type="datetime-local" value="2024-03-15T10:23">
                <div class="form-hint">Auto-extracted from EXIF. Adjust if incorrect.</div>
              </div>

              <div class="form-group">
                <label>Location</label>
                <select>
                  <option selected>Tiger Beach, Bahamas</option>
                  <option>Fuvahmulah Atoll, Maldives</option>
                  <option>Aliwal Shoal, South Africa</option>
                  <option>North Shore, Hawaii</option>
                </select>
                <div class="form-hint">Defaults to session location. Override if different.</div>
              </div>

              <div class="form-group">
                <label>Comment</label>
                <textarea placeholder="Behaviour, conditions, notable details‚Ä¶">Approached from below, circled twice. Appeared relaxed. Good profile shots of snout region captured.</textarea>
              </div>

            </div>
          </div>

          <!-- Actions -->
          <div class="card">
            <div class="card-body">
              <div id="draft-actions">
                <div class="flex-gap8" style="justify-content:flex-end; flex-wrap:wrap;">
                  <button class="btn btn-outline" onclick="saveDraft()">Save Draft</button>
                  <button class="btn btn-success" onclick="confirmObservation()">
                    ‚úì Confirm Observation
                  </button>
                </div>
                <p class="text-muted text-sm mt8" style="text-align:right;">
                  Confirming is permanent. Drafts can be edited at any time.
                </p>
              </div>
              <div id="confirmed-actions" style="display:none;">
                <div class="flex-center" style="gap:12px; color:var(--green);">
                  <span style="font-size:22px;">‚úì</span>
                  <span class="fw6">Observation confirmed on March 15, 2024 at 12:41</span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div><!-- /grid2 -->
    </div><!-- /page-body -->
  </div><!-- /main -->
</div>

<script>
  function confirmObservation() {
    if (!confirm('Confirm this observation? This action cannot be undone.')) return;
    document.getElementById('obs-status').className = 'status s-confirmed';
    document.getElementById('obs-status').textContent = 'Confirmed';
    document.getElementById('draft-actions').style.display = 'none';
    document.getElementById('confirmed-actions').style.display = 'block';
    document.querySelectorAll('input, select, textarea').forEach(el => el.disabled = true);
  }

  function saveDraft() {
    alert('Draft saved.');
  }

  function toggleExif() {
    const panel = document.getElementById('exif-panel');
    const label = document.getElementById('exif-toggle-label');
    const open = panel.style.display === 'block';
    panel.style.display = open ? 'none' : 'block';
    label.textContent = open ? 'Show ‚ñæ' : 'Hide ‚ñ¥';
  }
</script>
</body>
</html>
